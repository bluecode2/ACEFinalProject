<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL MAP 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="genCode">

	<select id="selectGeneralCode" resultClass="general.GeneralCodeBean"
		parameterClass="java.util.Map">
		SELECT *
		FROM (SELECT genCode.*, ROWNUM rnum
		FROM (
		SELECT 
		gen_code_id 			AS genCodeId,
		Gen_code_caption 		AS genCodeCaption,
		Parent_Id 				AS parentId,
		IS_ACTIVE				AS isActive,
		GEN_CODE_INDEX 			AS genCodeIndex
		FROM
		general_code
		where 1=1
		<dynamic prepend="AND">
			<isEqual property="searchField" compareValue="genCodeId">
				LOWER(gen_code_id) LIKE LOWER( '%' || #searchValue# || '%' )
			</isEqual>
		</dynamic>
		<dynamic prepend="AND">
			<isEqual property="searchField" compareValue="genCodeCaption">
				LOWER(gen_code_caption) LIKE LOWER( '%' || #searchValue# || '%' )
			</isEqual>
		</dynamic>
		<dynamic prepend="AND">
			<isEqual property="searchField" compareValue="parentId">
				LOWER(Parent_id) LIKE LOWER( '%' || #searchValue# || '%' )
			</isEqual>
		</dynamic>
		<dynamic prepend="AND">
			<isEqual property="searchField" compareValue="isActive">
				LOWER(is_active) LIKE LOWER( '%' || #searchValue# || '%' )
			</isEqual>
		</dynamic>
		order by gen_code_index) genCode
		WHERE ROWNUM &lt;= #end#)
		WHERE rnum
		&gt; #begin#
	</select>

	<select id="countGeneralCode" resultClass="java.lang.Integer" parameterClass="java.util.Map">
		select count(1) from general_code
		where 1=1
		<dynamic prepend="AND">
			<isEqual property="searchField" compareValue="genCodeId">
				LOWER(gen_code_id) LIKE LOWER( '%' || #searchValue# || '%' )
			</isEqual>
		</dynamic>
		<dynamic prepend="AND">
			<isEqual property="searchField" compareValue="genCodeCaption">
				LOWER(gen_code_caption) LIKE LOWER( '%' || #searchValue# || '%' )
			</isEqual>
		</dynamic>
		<dynamic prepend="AND">
			<isEqual property="searchField" compareValue="parentId">
				LOWER(Parent_id) LIKE LOWER( '%' || #searchValue# || '%' )
			</isEqual>
		</dynamic>
		<dynamic prepend="AND">
			<isEqual property="searchField" compareValue="isActive">
				LOWER(is_active) LIKE LOWER( '%' || #searchValue# || '%' )
			</isEqual>
		</dynamic>
	</select>
	
	<select id="getGenCodeWithId" parameterClass="java.lang.String" resultClass="general.GeneralCodeBean">
	SELECT 
		gen_code_id 			AS genCodeId,
		Gen_code_caption 		AS genCodeCaption,
		Parent_Id 				AS parentId,
		IS_ACTIVE				AS isActive,
		GEN_CODE_INDEX 			AS genCodeIndex
		FROM general_code
		where gen_code_id = #tmpGenId#
	</select>

	<insert id="insertGeneralCode" parameterClass="general.GeneralCodeBean">
		insert into
		general_code (GEN_CODE_ID, PARENT_ID, GEN_CODE_CAPTION,
		IS_ACTIVE,
		GEN_CODE_INDEX) values (#genCodeId#, #parentId#, #genCodeCaption#,
		#isActive#,
		#genCodeIndex#)
	</insert>
	<update id="updateGeneralCode" parameterClass="general.GeneralCodeBean">
		update
		general_code set
		Parent_id = #parentId#,
		GEN_CODE_CAPTION=
		#genCodeCaption#,
		IS_ACTIVE =
		#isActive#,
		GEN_CODE_INDEX = #genCodeIndex#
		where
		gen_code_id = #genCodeId#
	</update>

	<delete id="deleteGeneralCode" parameterClass="java.lang.String">
		delete from
		general_code where gen_code_id = #genCodeId#
	</delete>

</sqlMap>