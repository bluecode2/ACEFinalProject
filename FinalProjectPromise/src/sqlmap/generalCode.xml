<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL MAP 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="genCode">

	<select id="selectGeneralCode" resultClass="general.GeneralCodeBean"
		parameterClass="java.util.map">
		SELECT *
		FROM (SELECT genCode.*, ROWNUM rnum
		FROM (SELECT GEN_PARAM_ID
		AS genParamId,
		GEN_PARAM_DESC AS genParamDesc,
		GEN_PARAM_VALUE AS
		genParamValue,
		IS_ACTIVE AS isActive
		FROM general_parameter
		<dynamic prepend="where">
			<isNotNull property="col">
				<isNotEqual property="col" compareValue="SHOW_ALL">
					LOWER($col$)
					LIKE
					LOWER('%'||#input#||'%')
				</isNotEqual>
			</isNotNull>
		</dynamic>
		) genCode
		WHERE ROWNUM &lt;= #end#)
		WHERE rnum &gt; #begin#;
	</select>

	<insert id="insertGeneralCode" parameterClass="general.GeneralCodeBean">
		insert into
		general_code (GEN_CODE_ID, PARENT_ID, GEN_CODE_CAPTION,
		IS_ACTIVE,
		GEN_CODE_INDEX) values (#genCodeId#, #parentId#, #genCodeCaption#,
		#isActive#,
		#genCodeIndex#)
	</insert>
	<update id="updateGeneralCode" parameterClass="general.GeneralCodeBean">
		update
		general_code set
		Parent_id = #parentId#,
		GEN_CODE_CAPTION=
		#genCodeCaption#,
		IS_ACTIVE =
		#isActive#,
		GEN_CODE_INDEX = #genCodeIndex#
		where
		gen_code_id = #genCodeId#
	</update>

	<delete id="deleteGeneralCode" parameterClass="java.lang.String">
		delete from
		general_code where gen_code_id = #genCodeId#
	</delete>

</sqlMap>